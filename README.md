# 파이썬 풀스택 뉴스 요약기

## 1. 프로젝트 개요

이 프로젝트는 네이트 스포츠 뉴스의 랭킹 상위 3개 기사를 실시간으로 크롤링하고, Perplexity AI 모델을 통해 각 기사를 핵심 내용만 요약하여, 사용자가 데스크톱 애플리케이션에서 버튼 클릭 한 번으로 손쉽게 조회할 수 있도록 제공하는 **풀스택(Full-Stack)** 애플리케이션입니다.

백엔드는 FastAPI를 통해 강력한 API 서버를 구축하고, 프론트엔드(클라이언트)는 PySide6를 사용하여 직관적인 GUI를 제공합니다.

---

## 2. 핵심 개발 철학: 백엔드 우선 (Backend-First)

이 프로젝트는 **백엔드 우선(Backend-First)** 접근법을 따릅니다. 데이터의 흐름을 책임지는 핵심 엔진(크롤링, AI 연동, API 서버)을 먼저 완벽하게 구축하고, 마지막에 사용자에게 보여줄 인터페이스(GUI)를 연결하는 방식입니다.

#### 왜 이 접근법을 사용했는가?

자동차를 만들 때, 화려한 외관 디자인보다 엔진과 변속기, 조향 장치를 먼저 만드는 것과 같습니다. 핵심 기능이 완벽하게 작동하는 것을 먼저 보장해야, 이후에 발생하는 문제의 원인이 UI인지, 데이터 처리인지 명확하게 파악할 수 있습니다. 이는 특히 기능이 명확한 단기 프로젝트에서 매우 효과적인 전략입니다.

-   **장점 1: 명확한 문제 분리:** 백엔드 API가 정상적으로 작동한다면, 추후 GUI에서 발생하는 문제는 전적으로 프론트엔드 코드에 국한됩니다.
-   **장점 2: 재사용성:** 잘 만들어진 백엔드 API는 웹, 모바일 앱, 데스크톱 애플리케이션 등 어떤 프론트엔드와도 쉽게 결합할 수 있습니다.
-   **장점 3: 집중도 높은 개발:** 데이터 수집, 가공, 제공이라는 핵심 로직에 먼저 집중하여 서비스의 근간을 튼튼하게 만듭니다.

---

## 3. 시스템 아키텍처 및 데이터 흐름

```
[GUI 클라이언트 (gui.py)]
     |
     | 1. "뉴스 불러오기" 버튼 클릭
     V
+---------------------------------+
|    FastAPI 서버 (main.py)       |
|---------------------------------|
| 2. 크롤러 호출                  |-----> [crawler.py] ----> (네이트 뉴스 서버)
|    (crawl_nate_sports_news_top3)  |      - 상위 3개 기사 크롤링
|                                 |      - (제목, 링크, 본문) 반환
|    <----------------------------|
|                                 |
| 3. 요약기 동시 호출 (asyncio.gather) |
|    (summarize_text x 3)         |
|      |         |         |
|      |         |         `-----> [summarizer.py] -> (Perplexity AI API)
|      |         `---------------> [summarizer.py] -> (Perplexity AI API)
|      `-------------------------> [summarizer.py] -> (Perplexity AI API)
|                                 |
|    <----------------------------|
|      - 3개의 요약 결과 동시 취합   |
|                                 |
| 4. 최종 데이터 조합 및 JSON 응답  |
+---------------------------------+
     |
     | 5. 요약된 뉴스 데이터 수신
     V
[GUI 클라이언트 (gui.py)]
     |
     | 6. 수신된 데이터를 파싱하여 화면에 표시
     V
[사용자]
```

---

## 4. 기술 스택 및 학습 포인트 (Why We Use It)

### GUI Client (Desktop)

-   **PySide6**
    -   **Why?**: Qt라는 매우 강력하고 성숙한 C++ GUI 프레임워크를 파이썬에서 공식적으로 사용할 수 있게 해주는 라이브러리입니다. 풍부한 내장 위젯, 크로스플랫폼(Windows, macOS, Linux) 지원, 그리고 **시그널-슬롯(Signal-Slot)**이라는 우아한 이벤트 처리 메커니즘을 제공하여 복잡한 애플리케이션도 체계적으로 구축할 수 있습니다.
-   **qasync**
    -   **Why?**: **현대 GUI 비동기 프로그래밍의 핵심입니다.** PySide6의 이벤트 루프와 `asyncio`의 이벤트 루프는 서로 달라서 그대로 사용하면 충돌합니다. `qasync`는 이 두 이벤트 루프를 하나로 합쳐, API 요청과 같이 오래 걸리는 작업을 처리하는 동안 GUI가 멈추는(Freezing) 현상을 완벽하게 방지합니다. 이를 통해 사용자 경험을 극대화할 수 있습니다.

### Backend (Python)

-   **FastAPI** & **Uvicorn**
    -   **Why?**: 최신 파이썬 API 개발의 표준입니다. `비동기(Async)`를 네이티브로 지원하여 매우 높은 성능을 보여주며, 자동 API 문서 생성 기능은 개발 및 테스트 생산성을 극적으로 향상시킵니다. Uvicorn은 이 FastAPI 앱을 실행시켜주는 고성능 ASGI 서버입니다.
-   **Requests** & **BeautifulSoup4**
    -   **Why?**: 파이썬 웹 크롤링의 '국민 조합'입니다. `Requests`로 손쉽게 HTML을 가져오고, `BeautifulSoup4`로 jQuery처럼 편리하게 데이터를 추출합니다. 정적 웹 페이지 스크래핑에 가장 직관적이고 확실한 방법입니다.
-   **httpx** & **asyncio**
    -   **Why?**: `Requests`가 동기 방식의 표준이라면, `httpx`는 비동기 방식의 표준입니다. FastAPI 서버와 GUI 클라이언트 양쪽에서 외부 API를 호출하거나 오래 걸리는 I/O 작업을 처리할 때, `httpx`를 사용해야만 프로그램이 멈추지 않고 다른 작업을 동시에 처리할 수 있습니다. 특히 `asyncio.gather`는 여러 비동기 작업을 동시에 실행시켜 응답성을 극대화하는 강력한 도구입니다.
-   **python-dotenv**
    -   **Why?**: **보안은 기본입니다.** API 키와 같은 민감한 정보를 `.env` 파일에 분리하여, 소스 코드와 안전하게 분리하고 Git에 노출되는 것을 방지합니다.

### Package Management

-   **uv**
    -   **Why?**: `pip`과 `venv`를 합친 것보다 훨씬 빠른 차세대 파이썬 패키지 관리 도구입니다. Rust로 작성되어 매우 빠른 속도로 의존성을 해결하고 가상 환경을 구축합니다.

---

## 5. 개발 진행 순서

1.  **Phase 1: 웹 크롤러 개발 (`crawler.py`)**

    -   `requests`와 `BeautifulSoup`으로 네이트 뉴스 랭킹 페이지 접속 및 TOP 3 기사의 (제목, 링크, 본문)을 추출하는 함수 완성.

2.  **Phase 2: AI 요약기 개발 (`summarizer.py`)**

    -   `httpx`를 사용하여 Perplexity AI API와 비동기 통신을 하는 `summarize_text` 함수 구현 및 API 키 보안 처리.

3.  **Phase 3: API 서버 구축 및 연동 (`main.py`)**

    -   `FastAPI`를 이용해 `/summarize-top3-news` 엔드포인트를 생성.
    -   `asyncio.gather`를 활용하여 3개의 기사 본문을 **동시에** 요약기에 전달하고, 크롤링 데이터와 조합하여 최종 JSON을 반환하는 로직 완성.

4.  **Phase 4: GUI 클라이언트 개발 (`gui.py`)**
    -   `PySide6`를 사용하여 메인 윈도우와 버튼, 텍스트 박스 등 기본 UI 위젯 구성.
    -   **시그널-슬롯** 메커니즘을 이용해 '버튼 클릭'이라는 신호(Signal)와 'API 호출 함수'라는 슬롯(Slot)을 연결.
    -   **`qasync`** 라이브러리를 도입하여 PySide6의 이벤트 루프와 `asyncio`의 이벤트 루프를 통합, 비동기 API 호출 시 GUI가 멈추지 않도록 구현.
    -   API로부터 수신한 최종 데이터를 HTML 형식으로 파싱하여 `QTextEdit`에 보기 좋게 출력.

---

## 6. 프로젝트 실행 방법

1.  **.env 파일 생성**

    -   프로젝트 루트 디렉터리에 `.env` 파일을 생성하고, 아래 내용으로 Perplexity API 키를 추가합니다.

    ```
    PPLX_API_KEY=여러분의_API_키를_입력하세요
    ```

2.  **필요한 라이브러리 설치**

    -   `uv`를 사용하여 필요한 모든 패키지를 설치합니다.

    ```bash
    uv add fastapi uvicorn python-dotenv httpx requests beautifulsoup4 PySide6 qasync
    ```

3.  **API 서버 실행**

    -   **첫 번째 터미널**에서 `uv run` 명령어를 통해 `uvicorn` 서버를 실행합니다.

    ```bash
    uv run uvicorn main:app --reload
    ```

4.  **GUI 클라이언트 실행**
    -   **두 번째 터미널**을 열고, 아래 명령어로 GUI 애플리케이션을 실행합니다.
    ```bash
    uv run python3 gui.py
    ```
    -   "뉴스 요약 불러오기" 버튼을 클릭하여 결과를 확인합니다.

---

## 7. 향후 개선 과제

-   **데이터베이스 연동**: 요약된 뉴스 데이터를 `SQLite`나 `PostgreSQL` 같은 데이터베이스에 저장하여, 과거 데이터 조회 및 분석 기능 추가.
-   **크롤러 확장**: 스포츠 뉴스 외에 종합, 연예 등 다른 카테고리의 뉴스도 선택적으로 크롤링할 수 있도록 기능 확장.
-   **배포**: `Docker`를 사용하여 프로젝트를 컨테이너화하고, `PyInstaller`나 `Briefcase`를 이용해 데스크톱 앱을 실행 파일로 패키징.
